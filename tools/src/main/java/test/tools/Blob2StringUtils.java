package com.zteict.med.wuzhou.util;

import java.nio.charset.Charset;
import java.sql.Blob;
import java.sql.SQLException;

public class Blob2StringUtils {

    public static Charset charset = Charset.forName("utf-8");

    public static String trans(Blob blob) throws SQLException {
        if (blob == null) {
            return null;
        }
        long len = blob.length();
        String str = null;
        if (len > Integer.MAX_VALUE) {
            StringBuilder sb = new StringBuilder();
            int intLen = Integer.MAX_VALUE;
            long pos = 1;
            while (intLen > 0) {
                sb.append(new String(blob.getBytes(pos, intLen), charset));
                len -= intLen;
                intLen = (len > Integer.MAX_VALUE) ? Integer.MAX_VALUE : ((int) len);
            }
            str = sb.toString();
        } else {
            int intLen = (int) len;
            str = new String(blob.getBytes(1, intLen), charset);
        }

        return str.replaceFirst("\\u0000+", "");
    }

    @SuppressWarnings("unused")
    private static String cnToUnicode(String cn) {
        char[] chars = cn.toCharArray();
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < chars.length; i++) {
            sb.append("\\u");
            String s = Integer.toString(chars[i], 16);
            for (int j = 0, len = 4 - s.length(); j < len; j++) {
                sb.append("0");
            }
            sb.append(Integer.toString(chars[i], 16));
        }
        return sb.toString();
    }

    private static String unicodeToCn(String unicode) {
        String[] strs = unicode.split("\\\\u");
        StringBuilder sb = new StringBuilder();
        for (int i = 1; i < strs.length; i++) {
            sb.append((char) Integer.valueOf(strs[i], 16).intValue());
        }
        return sb.toString();
    }

    public static void main(String[] args) {
        String str = "\\u0\\u0\\u51fa\\u9662\\u8bb0\\u5f55\\ud\\ua\\u59d3\\u540d\\u3a\\u78\\u78\\u78\\ud\\ua\\u6027\\u522b\\u3a\\u5973\\ud\\ua\\u5e74\\u9f84\\u3a\\u35\\u36\\u5c81\\ud\\ua\\u5165\\u9662\\u79d1\\u5ba4\\u3a\\u795e\\u7ecf\\u5185\\u79d1\\u4e00\\ud\\ua\\u51fa\\u9662\\u79d1\\u5ba4\\u3a\\u795e\\u7ecf\\u5185\\u79d1\\u4e00\\ud\\ua\\u4f4f\\u9662\\u65e5\\u671f\\u3a\\u32\\u30\\u31\\u37\\u5e74\\u31\\u32\\u6708\\u30\\u36\\u65e5\\ud\\ua\\u51fa\\u9662\\u65e5\\u671f\\u3a\\u32\\u30\\u31\\u37\\u5e74\\u31\\u32\\u6708\\u31\\u32\\u65e5\\ud\\ua\\u4f4f\\u9662\\u3a\\u30\\u36\\u5929\\ud\\ua\\u5165\\u9662\\u65f6\\u75c5\\u60c5\\u6458\\u8981\\uff1a\\u60a3\\u8005\\u4ee5\\u53f3\\u4e0a\\u80a2\\u9ebb\\u6728\\u31\\u6708\\u4f59\\u3002\\u5165\\u9662\\u3002\\u65e2\\u5f80\\uff1a\\u6709\\u9ad8\\u8840\\u538b\\u75c5\\u53f2\\uff0c\\u670d\\u7528\\u785d\\u82ef\\u5730\\u5e73\\u7f13\\u91ca\\u7247\\u31\\u30\\u6d\\u67\\u51\\u44\\u6cbb\\u7597\\uff0c\\u5e73\\u7d20\\u8840\\u538b\\u31\\u34\\u30\\u2f\\u38\\u30\\u6d\\u6d\\u48\\u67\\u5de6\\u53f3\\uff1b\\u6709\\u7cd6\\u5c3f\\u75c5\\u75c5\\u53f2\\uff0c\\u76ee\\u524d\\u4e88\\u4e8c\\u7532\\u53cc\\u80cd\\u80a0\\u6eb6\\u7247\\u6cbb\\u7597\\uff0c\\u672a\\u76d1\\u6d4b\\u8840\\u7cd6\\uff1b\\u6709\\u9ad8\\u8102\\u8840\\u75c7\\u75c5\\u53f2\\uff1b\\u6709\\u9888\\u690e\\u75c5\\u75c5\\u53f2\\uff1b\\u6709\\u5256\\u5bab\\u4ea7\\u624b\\u672f\\u53f2\\u3002\\u5165\\u9662\\u67e5\\u4f53\\uff1a\\u751f\\u547d\\u4f53\\u5f81\\uff1a\\u4f53\\u6e29\\u33\\u36\\u2e\\u38\\u2103\\uff0c\\u8109\\u640f\\u37\\u30\\u6b21\\u2f\\u5206\\uff0c\\u547c\\u5438\\u32\\u30\\u6b21\\u2f\\u5206\\uff0c\\u8840\\u538b\\u31\\u32\\u30\\u2f\\u37\\u30\\u6d\\u6d\\u48\\u67\\uff0c\\u795e\\u5fd7\\u6e05\\u6670\\uff0c\\u5fc3\\u80ba\\u542c\\u8bca\\u672a\\u89c1\\u5f02\\u5e38\\uff0c\\u8179\\u8f6f\\uff0c\\u65e0\\u538b\\u75db\\u53ca\\u53cd\\u8df3\\u75db\\uff0c\\u53cc\\u4e0b\\u80a2\\u65e0\\u6d6e\\u80bf\\u3002\\u795e\\u7ecf\\u7cfb\\u7edf\\uff1a\\u795e\\u5fd7\\u6e05\\uff0c\\u53f3\\u5229\\u624b\\uff0c\\u9ad8\\u7ea7\\u795e\\u7ecf\\u529f\\u80fd\\u68c0\\u67e5\\u672a\\u89c1\\u5f02\\u5e38\\uff0c\\u9885\\u795e\\u7ecf\\u68c0\\u67e5\\u672a\\u89c1\\u5f02\\u5e38\\u3002\\u5de6\\u4fa7\\u80a2\\u4f53\\u808c\\u5f20\\u529b\\u6b63\\u5e38\\uff0c\\u53f3\\u4fa7\\u80a2\\u4f53\\u808c\\u5f20\\u529b\\u6b63\\u5e38\\uff0c\\u5de6\\u4fa7\\u80a2\\u4f53\\u808c\\u529b\\u35\\u7ea7\\uff0c\\u53f3\\u4fa7\\u80a2\\u4f53\\u808c\\u529b\\u35\\u7ea7\\u3002\\u6df1\\u3001\\u6d45\\u3001\\u590d\\u5408\\u611f\\u89c9\\u672a\\u89c1\\u5f02\\u5e38\\u3002\\u5de6\\u4fa7\\u80a2\\u4f53\\u8171\\u53cd\\u5c04\\u672a\\u89c1\\u5f02\\u5e38\\uff0c\\u53f3\\u4fa7\\u80a2\\u4f53\\u8171\\u53cd\\u5c04\\u672a\\u89c1\\u5f02\\u5e38\\u3002\\u75c5\\u7406\\u53cd\\u5c04\\u672a\\u5f15\\u51fa\\uff0c\\u8111\\u819c\\u523a\\u6fc0\\u5f81\\u9634\\u6027\\u3002\\u6307\\u9f3b\\u53ca\\u8ddf\\u819d\\u80eb\\u8bd5\\u9a8c\\u7a33\\u51c6\\uff0c\\u95ed\\u76ee\\u96be\\u7acb\\u5f81\\u9634\\u6027\\u3002\\ud\\ua\\u5165\\u9662\\u8bca\\u65ad\\uff1a\\u31\\u3001\\u53f3\\u4e0a\\u80a2\\u9ebb\\u6728\\u67e5\\u56e0\\uff1a\\u9888\\u690e\\u75c5\\uff1f\\u8111\\u6897\\u6b7b\\uff1f\\u20\\u20\\u20\\u20\\ud\\ua\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u32\\u3001\\u9ad8\\u8840\\u538b\\u75c5\\uff08\\u836f\\u7269\\u6cbb\\u7597\\uff09\\u5f88\\u9ad8\\u5371\\u7ec4\\ud\\ua\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u33\\u3001\\u32\\u578b\\u7cd6\\u5c3f\\u75c5\\ud\\ua\\u4f4f\\u9662\\u8bca\\u7597\\u7ecf\\u8fc7\\uff1a\\u5165\\u9662\\u884c\\u5404\\u9879\\u68c0\\u67e5\\uff0c\\u8840\\u5e38\\u89c4\\u4e94\\u5206\\u7c7b\\uff1a\\u767d\\u7ec6\\u80de\\u20\\u31\\u30\\u2e\\u33\\u34\\u28\\u2a\\u31\\u30\\u5e\\u39\\u2f\\u4c\\u29\\u2191\\uff1b\\u8840\\u5c0f\\u677f\\u20\\u33\\u33\\u36\\u2e\\u30\\u30\\u28\\u2a\\u31\\u30\\u5e\\u39\\u2f\\u4c\\u29\\u2191\\uff1b\\u809d\\u529f\\u31\\u31\\u9879\\uff1a\\u4e19\\u6c28\\u9178\\u6c28\\u57fa\\u8f6c\\u79fb\\u9176\\u20\\u33\\u37\\u28\\u55\\u2f\\u4c\\u29\\u2191\\uff0c\\u5929\\u95e8\\u51ac\\u6c28\\u9178\\u6c28\\u57fa\\u8f6c\\u79fb\\u9176\\u20\\u33\\u34\\u28\\u55\\u2f\\u4c\\u29\\u2191\\uff1b\\u80be\\u529f\\u36\\u9879\\uff1a\\u5c3f\\u9178\\u20\\u33\\u36\\u32\\u2e\\u37\\u28\\u75\\u6d\\u6f\\u6c\\u2f\\u4c\\u29\\u2191\\uff1b\\u8840\\u8102\\u36\\u9879\\uff1a\\u7518\\u6cb9\\u4e09\\u8102\\u20\\u33\\u2e\\u39\\u34\\u28\\u6d\\u6d\\u6f\\u6c\\u2f\\u4c\\u29\\u2191\\uff1b\\u7535\\u89e3\\u8d28\\u3001\\u5fc3\\u808c\\u9176\\u3001\\u43\\u52\\u50\\u3001\\u540c\\u578b\\u534a\\u80f1\\u6c28\\u9178\\u3001\\u7532\\u529f\\u5927\\u81f4\\u6b63\\u5e38\\u3002\\u63d0\\u793a\\u9ad8\\u8840\\u538b\\u6027\\u5fc3\\u810f\\u75c5\\u3002\\u8f7b\\u5ea6\\u8102\\u80aa\\u809d\\u80c6\\u3001\\u813e\\u3001\\u80f0\\u3001\\u53cc\\u80be\\u3001\\u8f93\\u5c3f\\u7ba1\\u3001\\u8180\\u80f1\\u3001\\u5b50\\u5bab\\u3001\\u9644\\u4ef6\\u533a\\u672a\\u89c1\\u5f02\\u5e38\\u3002\\u5fc3\\u810f\\u5f69\\u8d85\\u63d0\\u793a\\uff1a\\u5de6\\u5ba4\\u8212\\u5f20\\u529f\\u80fd\\u51cf\\u9000\\u3002\\u9888\\u52a8\\u8109\\u42\\u8d85\\u63d0\\u793a\\uff1a\\u5de6\\u4fa7\\u9888\\u603b\\u52a8\\u8109\\u9644\\u58c1\\u6591\\u5757\\uff1b\\u53f3\\u4fa7\\u9888\\u603b\\u3001\\u53cc\\u4fa7\\u9888\\u5185\\u3001\\u9888\\u5916\\u3001\\u690e\\u52a8\\u8109\\u672a\\u89c1\\u5f02\\u5e38\\u3002\\u5934\\u9888\\u4d\\u52\\u63d0\\u793a\\uff1a\\u31\\u3001\\u6795\\u5927\\u6c60\\u5f02\\u5e38\\u4fe1\\u53f7\\u5f71\\uff0c\\u8003\\u8651\\u86db\\u7f51\\u819c\\u56ca\\u80bf\\u3002\\u32\\u3001\\u90e8\\u5206\\u7a7a\\u6ce1\\u8776\\u978d\\u3002\\u33\\u3001\\u43\\u36\\u2f\\u37\\u690e\\u95f4\\u76d8\\u8f7b\\u5ea6\\u81a8\\u51fa\\u3002\\u34\\u3001\\u9888\\u690e\\u9000\\u884c\\u6027\\u53d8\\u3002\\u35\\u3001\\u5934\\u9885\\u33\\u44\\u2d\\u54\\u4f\\u46\\u2d\\u4d\\u52\\u41\\u53ca\\u9888\\u90e8\\u43\\u45\\u2d\\u4d\\u52\\u41\\uff1a\\u5934\\u9888\\u52a8\\u8109\\u672a\\u89c1\\u660e\\u663e\\u5f02\\u5e38\\u3002\\u5165\\u9662\\u540e\\u4e88\\u6539\\u5584\\u5faa\\u73af\\u3001\\u8425\\u517b\\u795e\\u7ecf\\u53ca\\u5bf9\\u75c7\\u6cbb\\u7597\\uff0c\\u60a3\\u8005\\u75c7\\u72b6\\u7f13\\u89e3\\uff0c\\u4e88\\u51fa\\u9662\\u3002\\ud\\ua\\u51fa\\u9662\\u65f6\\u60c5\\u51b5\\uff1a\\u60a3\\u8005\\u80a2\\u4f53\\u9ebb\\u6728\\u7f13\\u89e3\\uff0c\\u65e0\\u5934\\u6655\\u3001\\u89c6\\u7269\\u65cb\\u8f6c\\uff0c\\u65e0\\u5934\\u75db\\u3001\\u5455\\u5410\\uff0c\\u67e5\\u4f53\\uff1a\\u8840\\u538b\\u31\\u32\\u38\\u2f\\u37\\u32\\u6d\\u6d\\u48\\u67\\uff0c\\u795e\\u5fd7\\u6e05\\u6670\\uff0c\\u5fc3\\u80ba\\u542c\\u8bca\\u672a\\u89c1\\u5f02\\u5e38\\uff0c\\u8179\\u8f6f\\uff0c\\u65e0\\u538b\\u75db\\u53ca\\u53cd\\u8df3\\u75db\\uff0c\\u53cc\\u4e0b\\u80a2\\u65e0\\u6d6e\\u80bf\\u3002\\u808c\\u5f20\\u529b\\u6b63\\u5e38\\uff0c\\u808c\\u529b\\u35\\u7ea7\\u3002\\u6df1\\u3001\\u6d45\\u3001\\u590d\\u5408\\u611f\\u89c9\\u672a\\u89c1\\u5f02\\u5e38\\u3002\\u75c5\\u7406\\u53cd\\u5c04\\u672a\\u5f15\\u51fa\\uff0c\\u8111\\u819c\\u523a\\u6fc0\\u5f81\\u9634\\u6027\\u3002\\ud\\ua\\u51fa\\u9662\\u8bca\\u65ad\\uff1a\\u31\\u3001\\u591a\\u53d1\\u6027\\u795e\\u7ecf\\u75c5\\u20\\ud\\ua\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u32\\u3001\\u9ad8\\u8840\\u538b\\u75c5\\uff08\\u836f\\u7269\\u6cbb\\u7597\\uff09\\u5f88\\u9ad8\\u5371\\u7ec4\\ud\\ua\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u33\\u3001\\u32\\u578b\\u7cd6\\u5c3f\\u75c5\\ud\\ua\\u51fa\\u9662\\u533b\\u5631\\uff1a\\u31\\u3001\\u89c4\\u5f8b\\u751f\\u6d3b\\uff0c\\u65e5\\u5e38\\u751f\\u6d3b\\u6ce8\\u610f\\u6212\\u70df\\u3001\\u63a7\\u9152\\u3001\\u63a7\\u5236\\u4f53\\u91cd\\u3001\\u8c03\\u8282\\u60c5\\u7eea\\uff0c\\u20\\u4f4e\\u76d0\\u3001\\u4f4e\\u8102\\u3001\\u7cd6\\u5c3f\\u75c5\\u996e\\u98df\\uff0c\\u9002\\u5f53\\u953b\\u70bc\\uff0c\\u76d1\\u6d4b\\u8840\\u538b\\u3001\\u8840\\u7cd6\\u53d8\\u5316\\uff0c\\u575a\\u6301\\u670d\\u836f\\u3002\\u20\\u20\\ud\\ua\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u32\\u3001\\u9884\\u7ea6\\u590d\\u8bca\\uff1a\\u51fa\\u9662\\u31\\u5468\\u5185\\uff0c\\u53ef\\u901a\\u8fc7\\u6253\\u31\\u32\\u35\\u38\\u30\\u7535\\u8bdd\\u9884\\u7ea6\\uff0c\\u5728\\u661f\\u671f\\u4e00\\u3001\\u4e09\\u5230\\u6211\\u79d1\\u4e13\\u5bb6\\u6216\\u4e13\\u79d1\\u95e8\\u8bca\\u590d\\u8bca\\u3002\\ud\\ua\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u33\\u3001\\u5982\\u51fa\\u73b0\\u80a2\\u4f53\\u4e4f\\u529b\\u3001\\u9ebb\\u6728\\uff0c\\u7acb\\u5373\\u56de\\u9662\\u6216\\u5230\\u5f53\\u5730\\u533b\\u9662\\u590d\\u8bca\\u3002\\u20\\ud\\ua\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u34\\u3001\\u9075\\u533b\\u5631\\u670d\\u836f\\uff0c\\u51fa\\u9662\\u5e26\\u836f\\uff1a\\u963f\\u6258\\u4f10\\u4ed6\\u6c40\\u9499\\u7247\\u28\\u32\\u30\\u6d\\u67\\u53e3\\u670d\\u51\\u4e\\u29\\u20\\u590d\\u65b9\\u8840\\u6813\\u901a\\u7247\\u28\\u32\\u7c92\\u53e3\\u670d\\u54\\u49\\u44\\u29\\u20\\u7532\\u94b4\\u80fa\\u80f6\\u56ca\\u28\\u30\\u2e\\u35\\u30\\u6d\\u67\\u53e3\\u670d\\u54\\u49\\u44\\u29\\u20\\u76d0\\u9178\\u4e8c\\u7532\\u53cc\\u80cd\\u80a0\\u6eb6\\u7247\\u28\\u35\\u30\\u30\\u6d\\u67\\u53e3\\u670d\\u42\\u49\\u44\\u29\\u20\\ud\\ua\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u20\\u35\\u3001\\u51fa\\u9662\\u540e\\u5982\\u9700\\u54a8\\u8be2\\u76f8\\u5173\\u4e8b\\u9879\\uff0c\\u53ef\\u6253\\u6211\\u79d1\\u7535\\u8bdd\\u32\\u38\\u32\\u33\\u32\\u32\\u31\\u3002\\ud\\ua\\ud\\ua\\u4e3b\\u6cbb\\u533b\\u5e08\\u7b7e\\u540d\\uff1a\\u20\\ud\\ua\\ud\\ua\\u32\\u30\\u31\\u37\\u5e74\\u31\\u32\\u6708\\u31\\u32\\u65e5\\u30\\u39\\u65f6\\ud\\ua";
        str = unicodeToCn(str);
        System.out.println(str);
    }
}
